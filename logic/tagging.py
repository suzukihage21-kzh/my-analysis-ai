"""
タグ推奨ロジック

ジャーナル本文から適切なタグを推論します。
"""

# デフォルトのタグ定義（カテゴリ: [キーワードリスト]）
DEFAULT_TAG_KEYWORDS: dict[str, list[str]] = {
    "仕事": [
        "仕事", "業務", "会議", "ミーティング", "プロジェクト", "上司", "部下", "同僚",
        "残業", "出張", "プレゼン", "成果", "失敗", "納期", "クライアント", "締め切り",
        "報告", "資料", "タスク", "進捗", "チーム", "リモート", "在宅"
    ],
    "人間関係": [
        "友達", "友人", "親友", "家族", "親", "母", "父", "兄弟", "姉妹",
        "恋人", "パートナー", "妻", "夫", "子供", "喧嘩", "仲直り", "相談",
        "彼氏", "彼女", "祖父", "祖母", "おじいちゃん", "おばあちゃん"
    ],
    "健康": [
        "運動", "ジム", "ランニング", "食事", "睡眠", "体調", "風邪", "病院",
        "薬", "ダイエット", "疲れ", "元気", "頭痛", "腹痛", "ストレッチ",
        "ウォーキング", "筋トレ", "健康診断", "早寝", "早起き"
    ],
    "趣味": [
        "映画", "読書", "本", "ゲーム", "音楽", "ライブ", "旅行", "料理",
        "カフェ", "買い物", "アニメ", "漫画", "写真", "散歩", "ドライブ",
        "キャンプ", "登山", "美術館", "コンサート", "フェス"
    ],
    "成長": [
        "勉強", "学習", "資格", "スキル", "挑戦", "目標", "反省", "改善",
        "気づき", "学び", "セミナー", "読書", "英語", "プログラミング",
        "自己啓発", "成長", "振り返り", "計画"
    ],
    "感情": [
        "嬉しい", "楽しい", "幸せ", "感謝", "悲しい", "辛い", "怒り", "イライラ",
        "不安", "心配", "緊張", "悔しい", "スッキリ", "ワクワク", "ドキドキ",
        "寂しい", "モヤモヤ", "落ち着いた", "リラックス", "充実"
    ],
    "お金": [
        "貯金", "節約", "投資", "給料", "出費", "買い物", "ボーナス",
        "家計", "予算", "お金", "支払い", "収入"
    ],
    "自己理解": [
        "自分", "性格", "価値観", "強み", "弱み", "考え方", "習慣",
        "傾向", "パターン", "気づき", "内省", "振り返り"
    ],
}


def suggest_tags(content: str, existing_tags: list[str]) -> list[str]:
    """
    本文からタグを推奨する

    Args:
        content: ジャーナル本文
        existing_tags: 既存のユーザー定義タグリスト

    Returns:
        list[str]: 推奨タグのリスト
    """
    suggested = set()
    content_lower = content.lower()

    # 1. デフォルト定義からのマッチング
    for tag, keywords in DEFAULT_TAG_KEYWORDS.items():
        # タグ自体が含まれているか
        if tag.lower() in content_lower:
            suggested.add(tag)
            continue
        
        # キーワードが含まれているか
        for keyword in keywords:
            if keyword in content_lower:
                suggested.add(tag)
                break
    
    # 2. 既存タグからのマッチング
    for tag in existing_tags:
        if tag.lower() in content_lower:
            suggested.add(tag)

    return sorted(list(suggested))
